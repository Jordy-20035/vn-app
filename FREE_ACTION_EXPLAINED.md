# üé≠ Free Action System - How It Works

## What is a "Free Action"? (–°–≤–æ–±–æ–¥–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ)

**Free Action** is a special AI-powered feature that lets players perform custom actions beyond the pre-written choices. It's a **side action** that doesn't immediately progress the story.

## üìñ How It Works:

### 1. **Player Triggers Free Action**
   - Player clicks: "‚ú® –°–≤–æ–±–æ–¥–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ..."
   - Modal opens asking:
     - **"–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?"** (What do you want to do?)
     - **"–ö–∞–∫ –≤—ã —ç—Ç–æ —Å–¥–µ–ª–∞–µ—Ç–µ?"** (How will you do it?)

### 2. **AI Processes the Action**
   - Your action is sent to YandexGPT
   - AI considers:
     - Current scene context
     - Your character's stats
     - Available characters
     - World lore and rules
   - AI generates a response with:
     - **Narrative** (what happened)
     - **Outcome** (success, neutral, failure, etc.)
     - **Stat changes** (if any)

### 3. **Result is Shown**
   - Alert popup displays:
     ```
     üé≠ –û—Ç–≤–µ—Ç AI:
     
     [AI's narrative response]
     
     –ò—Å—Ö–æ–¥: success
     
     üìä –°—Ç–∞—Ç—ã:
     charm: +1
     
     ‚úÖ –¢–µ–ø–µ—Ä—å –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.
     ```

### 4. **Game Continues**
   - After clicking OK, you're back at the same scene
   - Your stats have been updated (HUD shows new values)
   - **You must now choose one of the main options** to progress the story

## üéØ Example from Your Screenshot:

**You wrote:**
- **–ß—Ç–æ:** –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∫–æ—Ñ–µ —É —Å–µ–∫—Ä–µ—Ç–∞—Ä—è
- **–ö–∞–∫:** –≤–µ–∂–ª–∏–≤–æ

**AI Response:**
> –°–µ–∫—Ä–µ—Ç–∞—Ä—å —É–ª—ã–±–∞–µ—Ç—Å—è –∏ –≥–æ–≤–æ—Ä–∏—Ç: ¬´–ö–æ–Ω–µ—á–Ω–æ, –æ–¥–Ω—É –º–∏–Ω—É—Ç—É.¬ª –û–Ω–∞ –¥–æ—Å—Ç–∞—ë—Ç —á–∞—à–∫—É –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ—Ñ–µ. –ê–Ω–Ω–∞ —á—É–≤—Å—Ç–≤—É–µ—Ç, —á—Ç–æ –µ—ë –æ–±–∞—è–Ω–∏–µ –ø–æ–º–æ–≥–ª–æ –≤ —ç—Ç–æ–º –ø—Ä–æ—Å—Ç–æ–º, –Ω–æ –≤–∞–∂–Ω–æ–º –º–æ–º–µ–Ω—Ç–µ.
> 
> **–ò—Å—Ö–æ–¥:** success

**What happened:**
1. ‚úÖ AI interpreted your action
2. ‚úÖ Generated a realistic response
3. ‚úÖ Determined it was a success
4. ‚úÖ (Probably) increased your Charm stat

**What's next:**
- The story doesn't auto-continue because **free actions are optional side interactions**
- To progress, you must choose one of the main options:
  - "–°–ø—Ä–æ—Å–∏—Ç—å, –≥–¥–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä?"
  - "–ü—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–π—Ç–∏ –º–∏–º–æ"
  - "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–∑—è—Ç–∫—É –∑–∞ –≤—Å—Ç—Ä–µ—á—É" (20 üíé)

## üéÆ Design Philosophy:

### Why doesn't the story auto-continue?

**Free actions are meant to:**
- Let you **interact with the world** in creative ways
- **Build stats** through roleplay
- **Add flavor** to your playthrough
- Give you **agency** without breaking the main narrative

**They are NOT meant to:**
- Replace main story choices
- Automatically advance the plot
- Skip important decisions

## üîÑ Complete Flow Example:

```
1. Scene: "–í—Ö–æ–¥ –≤ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ"
   ‚îî‚îÄ You see 4 options (3 main + 1 free action)

2. Click: "‚ú® –°–≤–æ–±–æ–¥–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ..."
   ‚îî‚îÄ Modal opens

3. Fill in: "–ø–æ–ø—Ä–æ—Å–∏—Ç—å –∫–æ—Ñ–µ" / "–≤–µ–∂–ª–∏–≤–æ"
   ‚îî‚îÄ AI processes

4. AI Response: "Secretary makes you coffee"
   ‚îî‚îÄ +1 Charm
   ‚îî‚îÄ Click OK

5. Back at Scene: "–í—Ö–æ–¥ –≤ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ"
   ‚îî‚îÄ Your Charm is now 1 instead of 0
   ‚îî‚îÄ Choose one of the 3 main options to continue

6. Choose: "–°–ø—Ä–æ—Å–∏—Ç—å, –≥–¥–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä?"
   ‚îî‚îÄ Story progresses to next scene
```

## üöÄ Advanced: AI Scene Transitions

In rare cases, if your free action is **extremely impactful**, the AI might suggest a scene transition by setting `nextScene` in its response. For example:

- If you ask for coffee, you stay at the same scene
- But if you ask to see the director and the AI decides you somehow convinced the secretary to let you in immediately, it might transition you to the director's office scene

This is rare and only happens when the AI determines your action fundamentally changes the situation.

## üìä Stat Tracking

Your free actions can affect your stats:
- **–ß–µ—Å—Ç–Ω–æ—Å—Ç—å (Honesty)** - Honest, direct approaches
- **–•–∏—Ç—Ä–æ—Å—Ç—å (Cunning)** - Manipulative, clever actions
- **–†–µ–ø—É—Ç–∞—Ü–∏—è (Reputation)** - Actions that affect how others see you
- **–û–±–∞—è–Ω–∏–µ (Charm)** - Charismatic, social interactions

The AI decides stat changes based on:
- Your action's nature
- How you perform it
- The outcome (success/failure)

## ‚úÖ Summary

**Free Actions = Side Interactions**
- They enrich your experience
- They build your character's stats
- They don't replace main story choices
- You must still choose a main option to progress

**This is working as designed!** üéâ

